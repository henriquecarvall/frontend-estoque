<div class="usuarios-container">
  <h2>ğŸ‘¥ GestÃ£o de UsuÃ¡rios</h2>

  <div class="loading" *ngIf="carregando">
    Carregando usuÃ¡rios...
  </div>

  <div *ngIf="!carregando">
    <div class="header-actions">
      <div class="busca-container">
        <input
          type="text"
          placeholder="ğŸ” Buscar usuÃ¡rio..."
          [(ngModel)]="termoBusca"
          (input)="filtrarUsuarios()"
          class="campo-busca">
      </div>
      <button class="btn-adicionar" routerLink="/adicionar-usuario">â• Adicionar UsuÃ¡rio</button>
    </div>

    <table class="tabela-usuarios">
      <thead>
      <tr>
        <th (click)="ordenarPor('id')" class="ordenavel">
          ID <span class="seta">{{ colunaOrdenada === 'id' ? (ordemAscendente ? 'â†‘' : 'â†“') : '' }}</span>
        </th>
        <th (click)="ordenarPor('nome')" class="ordenavel">
          Nome <span class="seta">{{ colunaOrdenada === 'nome' ? (ordemAscendente ? 'â†‘' : 'â†“') : '' }}</span>
        </th>
        <th (click)="ordenarPor('email')" class="ordenavel">
          Email <span class="seta">{{ colunaOrdenada === 'email' ? (ordemAscendente ? 'â†‘' : 'â†“') : '' }}</span>
        </th>
        <th (click)="ordenarPor('perfil')" class="ordenavel">
          Perfil <span class="seta">{{ colunaOrdenada === 'perfil' ? (ordemAscendente ? 'â†‘' : 'â†“') : '' }}</span>
        </th>
        <th>Status</th>
        <th>AÃ§Ãµes</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let usuario of usuariosFiltrados">
        <td>{{ usuario.id }}</td>
        <td>{{ usuario.nome }}</td>
        <td>{{ usuario.email }}</td>
        <td>
            <span class="badge" [class.badge-admin]="usuario.perfil === 'ADMIN'"
                  [class.badge-operador]="usuario.perfil === 'OPERADOR'">
              {{ usuario.perfil }}
            </span>
        </td>
        <td>
          <button class="btn-status"
                  [class.ativo]="usuario.ativo"
                  [class.inativo]="!usuario.ativo"
                  (click)="toggleAtivo(usuario)">
            {{ usuario.ativo ? 'âœ… Ativo' : 'âŒ Inativo' }}
          </button>
        </td>
        <td class="acoes">
          <button class="btn-editar" (click)="editarUsuario(usuario.id)">âœï¸ Editar</button>
          <button class="btn-excluir" (click)="excluirUsuario(usuario.id)">ğŸ—‘ï¸ Excluir</button>
        </td>
      </tr>
      </tbody>
    </table>

    <div *ngIf="usuariosFiltrados.length === 0" class="sem-resultados">
      Nenhum usuÃ¡rio encontrado.
    </div>
  </div>

  <button class="btn-voltar" routerLink="/">â† Voltar para Home</button>
</div>
