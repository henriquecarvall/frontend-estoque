<div class="form-container">
  <h2>‚ûï Adicionar Novo Produto</h2>

  <form (ngSubmit)="adicionarProduto()" #produtoForm="ngForm" class="produto-form">
    <div class="form-group">
      <label for="codigo">C√≥digo do Produto:</label>
      <div class="codigo-container">
        <input type="text" id="codigo" [(ngModel)]="produto.codigo" name="codigo" required #codigo="ngModel">
        <button type="button" class="btn-gerar" (click)="gerarCodigo()">üé≤ Gerar C√≥digo</button>
      </div>
      <div class="erro" *ngIf="codigo.invalid && (codigo.dirty || codigo.touched)">
        <div *ngIf="codigo.errors?.['required']">C√≥digo √© obrigat√≥rio</div>
      </div>
    </div>

    <div class="form-group">
      <label for="nome">Nome do Produto:</label>
      <input type="text" id="nome" [(ngModel)]="produto.nome" name="nome" required minlength="2" #nome="ngModel">
      <div class="erro" *ngIf="nome.invalid && (nome.dirty || nome.touched)">
        <div *ngIf="nome.errors?.['required']">Nome √© obrigat√≥rio</div>
        <div *ngIf="nome.errors?.['minlength']">Nome deve ter pelo menos 2 caracteres</div>
      </div>
    </div>

    <div class="form-group">
      <label for="quantidade">Quantidade em Estoque:</label>
      <input type="number" id="quantidade" [(ngModel)]="produto.quantidadeEstoque" name="quantidadeEstoque" min="0" required #quantidade="ngModel">
      <div class="erro" *ngIf="quantidade.invalid && (quantidade.dirty || quantidade.touched)">
        <div *ngIf="quantidade.errors?.['required']">Quantidade √© obrigat√≥ria</div>
        <div *ngIf="quantidade.errors?.['min']">Quantidade n√£o pode ser negativa</div>
      </div>
    </div>

    <div class="form-group">
      <label for="preco">Pre√ßo Unit√°rio (R$):</label>
      <input type="number" id="preco" [(ngModel)]="produto.precoUnitario" name="precoUnitario" step="0.01" min="0.01" required #preco="ngModel">
      <div class="erro" *ngIf="preco.invalid && (preco.dirty || preco.touched)">
        <div *ngIf="preco.errors?.['required']">Pre√ßo √© obrigat√≥rio</div>
        <div *ngIf="preco.errors?.['min']">Pre√ßo deve ser maior que zero</div>
      </div>
    </div>

    <div class="form-group">
      <label for="categoria">Categoria:</label>
      <input type="text" id="categoria" [(ngModel)]="produto.categoria" name="categoria" placeholder="Ex: Inform√°tica, Eletr√¥nicos...">
    </div>

    <div class="form-buttons">
      <button type="submit" class="btn-salvar" [disabled]="produtoForm.invalid || carregando">
        {{ carregando ? 'Salvando...' : 'üíæ Salvar Produto' }}
      </button>
      <button type="button" class="btn-voltar" routerLink="/produtos">‚Ü©Ô∏è Voltar</button>
    </div>
  </form>
</div>
